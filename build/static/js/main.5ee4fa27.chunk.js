(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/Ruby_Logo.3faf7fef.png"},107:function(e,t,a){e.exports=a.p+"static/media/Ruby_On_Rails_Logo.6cb79cc5.png"},108:function(e,t,a){e.exports=a.p+"static/media/javascript-logo.80cdee08.png"},109:function(e,t,a){e.exports=a.p+"static/media/react-logo-1000-transparent.96656bb8.png"},110:function(e,t,a){e.exports=a.p+"static/media/redux_logo.ffca3fad.png"},111:function(e,t,a){e.exports=a.p+"static/media/postit_note.15bc09a3.png"},116:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(39),s=a.n(r),l=(a(51),a(29)),i=a(2),c=a(3),m=a(5),u=a(4),d=a(6),p=a(10),h=(a(53),a(118)),f=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"ui menu navBar"},o.a.createElement(n.Fragment,null,o.a.createElement(h.a,{to:"/home",className:"item"},"Welcome Board"),"/home"===this.props.currentPath?null:o.a.createElement(n.Fragment,null,o.a.createElement(h.a,{to:"/mod/1",className:"item"},"Mod 1"),o.a.createElement(h.a,{to:"/mod/2",className:"item"},"Mod 2"),o.a.createElement(h.a,{to:"/mod/3",className:"item"},"Mod 3"),o.a.createElement(h.a,{to:"/mod/4",className:"item"},"Mod 4"),o.a.createElement(h.a,{to:"/mod/5",className:"item"},"Mod 5"))),this.props.isUserLoggedIn?o.a.createElement("span",{className:"ui menu navright"},o.a.createElement(h.a,{to:"/editProfile",className:"item"},"Edit Profile"),o.a.createElement("span",{className:"item pointer",onClick:this.props.logout},"Logout")):o.a.createElement("span",{className:"ui menu navright"},o.a.createElement(h.a,{to:"/login",className:"item"},"Login"),o.a.createElement(h.a,{to:"/signup",className:"item"},"SignUp")))}}]),t}(n.Component),g=a(120),b=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(g.a,null,o.a.createElement(g.a.Row,{columns:3},o.a.createElement(g.a.Column,null,o.a.createElement("div",{className:"mod-link-parent"},o.a.createElement("h1",null,"Mod 1"),o.a.createElement(h.a,{to:"/mod/1",className:"mod-link"},o.a.createElement("img",{className:"logo-image",alt:"",src:a(106)})))),o.a.createElement(g.a.Column,null,o.a.createElement("div",{className:"mod-link-parent"},o.a.createElement("h1",null,"Mod 2"),o.a.createElement(h.a,{to:"/mod/2",className:"mod-link"},o.a.createElement("img",{className:"logo-image",alt:"",src:a(107)})))),o.a.createElement(g.a.Column,null,o.a.createElement("div",{className:"mod-link-parent"},o.a.createElement("h1",null,"Mod 3"),o.a.createElement(h.a,{to:"/mod/3",className:"mod-link"},o.a.createElement("img",{className:"logo-image",alt:"",src:a(108)}))))),o.a.createElement(g.a.Row,{columns:3},o.a.createElement(g.a.Column,null,o.a.createElement("div",{className:"mod-link-parent"},o.a.createElement("h1",null,"Mod 4"),o.a.createElement(h.a,{to:"/mod/4",className:"mod-link"},o.a.createElement("img",{className:"logo-image",alt:"",src:a(109)})))),o.a.createElement(g.a.Column,null,o.a.createElement("div",{className:"mod-link-parent"},o.a.createElement("h1",null,"Mod 5"),o.a.createElement(h.a,{to:"/mod/5",className:"mod-link"},o.a.createElement("img",{className:"logo-image",alt:"",src:a(110)}))))))}}]),t}(o.a.Component),E=function(e){return o.a.createElement("div",null," ",o.a.createElement("h1",{id:"welcome"},o.a.createElement("span",null,"W"),o.a.createElement("span",null,"e"),o.a.createElement("span",null,"l"),o.a.createElement("span",null,"c"),o.a.createElement("span",null,"o"),o.a.createElement("span",null,"m"),o.a.createElement("span",null,"e"),o.a.createElement("span",null,"!")),o.a.createElement(b,null))},v=a(124),k=a(119),j=a(123),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={input:a.props.post.content},a.changeHandler=function(e){a.setState({input:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.editPostHandler(a.props.post.id,a.state.input)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"postit-form",className:"ui"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("textarea",{id:"postit-input",cols:"30",rows:"8",maxLength:"140",placeholder:"Edit post",value:this.state.input,onChange:this.changeHandler}),o.a.createElement("p",null,o.a.createElement("span",{className:"author"},"- ",this.props.author)),o.a.createElement("br",null),o.a.createElement("input",{id:"postit-submit",className:"pointer",type:"submit",value:"Update"})))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).editPostHandler=function(e){e.preventDefault(),a.props.editPostHandler()},a.state={markedForDeletion:!1,likes:"",author:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://welcome-board-backend.herokuapp.com/api/v1/likes").then(function(e){return e.json()}).then(function(t){var a=t.filter(function(t){return t.post_id===e.props.post.id}).length;e.setState({likes:a})});var t=void 0===this.props.users.find(function(t){return t.id===e.props.post.user_id})?"":this.props.users.find(function(t){return t.id===e.props.post.user_id}).full_name;this.setState({author:t})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"post-wrapper"},o.a.createElement("img",{alt:"",src:a(111)}),o.a.createElement("div",{className:"post-content"},this.props.post.user_id==localStorage.getItem("id")?o.a.createElement("span",{className:"delete pointer",onClick:this.deleteHandler.bind(this)},"x"):null,this.props.post.user_id==localStorage.getItem("id")?o.a.createElement(y,{post:this.props.post,editPostHandler:this.props.editPostHandler,author:this.state.author}):o.a.createElement("p",null,this.props.post.content," ",o.a.createElement("span",{className:"author"},"- ",this.state.author)),o.a.createElement("div",{className:"likes"},o.a.createElement("span",null,this.state.likes," "),o.a.createElement("span",{className:this.props.isUserLoggedIn?"pointer":"",onClick:this.props.isUserLoggedIn?this.likesHandler.bind(this):null},"\ud83d\ude0e"))))}},{key:"likesHandler",value:function(){fetch("https://welcome-board-backend.herokuapp.com/api/v1/likes",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({post_id:this.props.post.id,user_id:this.props.currentUser.id})}).then(this.setState({likes:this.state.likes+1}))}},{key:"deleteHandler",value:function(){fetch("https://welcome-board-backend.herokuapp.com/api/v1/posts/".concat(this.props.post.id),{method:"DELETE",headers:{Authorization:localStorage.getItem("token")}}).then(function(e){return e.json()}).then(console.log),this.props.deleteHandler(this.props.post.id)}}]),t}(o.a.Component),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={input:""},a.handleChange=function(e){a.setState({input:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.addPost(a.state.input,a.props.mod),a.setState({input:""})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"new-post-form",className:"ui card form"},o.a.createElement("form",{onSubmit:this.handleSubmit},"Write a note to a previous mod.",o.a.createElement("br",null),o.a.createElement("textarea",{className:"form-control",type:"text",placeholder:"Enter note",cols:"120",rows:"8",maxLength:"140",value:this.state.input,onChange:this.handleChange}),o.a.createElement("br",null),o.a.createElement("input",{className:"submit button pointer",type:"submit"})))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mod_posts:a.props.mod_id},a.showPostArray=function(){var e=a.props.postArray.filter(function(e){return e.mod_id==a.props.mod_id}).reverse();return o.a.createElement("div",{className:"post-array-container"},e.map(function(e){return o.a.createElement("div",{key:e.id,className:"content-wrapper"},o.a.createElement(w,{post:e,currentUser:a.props.currentUser,deleteHandler:a.props.deleteHandler,editPostHandler:a.props.editPostHandler,likes:a.props.likes,isUserLoggedIn:a.props.isUserLoggedIn,users:a.props.users}))}))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={display:this.props.loggedInUser?"block":"none"};return o.a.createElement("div",{className:"ui"},o.a.createElement("h1",{className:"mod-name"},"Mod ".concat(this.props.mod_id)),o.a.createElement("div",{className:"post-container"},this.showPostArray()),o.a.createElement("div",{style:e},o.a.createElement(_,{addPost:this.props.addPost,mod:this.props.mod_id,currentUser:this.props.currentUser})))}}]),t}(n.Component),S=a(15),N=a(122),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={id:a.props.currentUser.id,full_name:a.props.currentUser.full_name,password:"",mod_id:a.props.currentUser.mod_id},a.submitHandler=a.submitHandler.bind(Object(p.a)(Object(p.a)(a))),a.changeHandler=a.changeHandler.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"edit-profile-form",className:"ui card form"},this.props.isUserLoggedIn?o.a.createElement("form",{onSubmit:this.submitHandler},o.a.createElement("label",{htmlFor:"full_name"},"Full Name: "),o.a.createElement("input",{type:"text",name:"full_name",onChange:this.changeHandler,value:this.state.full_name}),o.a.createElement("label",{htmlFor:"password"},"Password: "),o.a.createElement("input",{type:"password",name:"password",placeholder:"type new password",id:"password",value:this.state.password,onChange:this.changeHandler}),o.a.createElement("label",{htmlFor:"mod"},"Mod #: "),o.a.createElement("select",{name:"mod_id",id:"mod_id",onChange:this.changeHandler,value:this.state.mod_id},this.getMods()),o.a.createElement("input",{type:"submit",className:"submit button pointer",value:"Update"})):o.a.createElement(N.a,{to:"/login"}))}},{key:"getMods",value:function(){return this.props.mods.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.rank)})}},{key:"submitHandler",value:function(e){e.preventDefault(),this.props.updateHandler(this.state),e.target.reset()}},{key:"changeHandler",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}}]),t}(n.Component),U=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={loginFullName:"",loginPassword:""},a.changeHandler=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.submitLoginHandler=function(e){e.preventDefault(),a.props.submitLoginHandler(a.state,e),a.setState({loginFullName:"",loginPassword:""})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"login-form",className:"ui card form"},o.a.createElement("h2",null,"Login"),o.a.createElement(k.a,{path:"/login",render:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:e.submitLoginHandler},o.a.createElement("label",{htmlFor:"full-name"},"Full Name:"),o.a.createElement("input",{id:"full-name",className:"form-control",name:"loginFullName",type:"text",placeholder:"Enter your full name",value:e.state.loginFullName,onChange:e.changeHandler}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"password"},"Password:"),o.a.createElement("input",{id:"password",className:"form-control",name:"loginPassword",type:"password",placeholder:"Enter a password",value:e.state.loginPassword,onChange:e.changeHandler}),o.a.createElement("br",null),o.a.createElement("input",{type:"submit",className:"submit button pointer",value:"Submit"})))}}))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={full_name:"",password:"",mod_id:1},a.changeHandler=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.submitSignUpHandler=function(e){e.preventDefault(),a.props.submitSignUpHandler(a.state,e),a.setState({full_name:"",password:"",mod_id:1})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"signup-form",className:"ui card form"},o.a.createElement("h2",null,"Sign Up"),o.a.createElement(k.a,{path:"/signup",render:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:e.submitSignUpHandler},o.a.createElement("label",{htmlFor:"full-name"},"Full Name:"),o.a.createElement("input",{id:"full-name",className:"form-control",name:"full_name",type:"text",placeholder:"Enter your full name",value:e.state.full_name,onChange:e.changeHandler}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"password"},"Password:"),o.a.createElement("input",{id:"password",className:"form-control",name:"password",type:"password",placeholder:"Enter a password",value:e.state.password,onChange:e.changeHandler}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"mod"},"Mod:"),o.a.createElement("select",{id:"mod",className:"form-control",name:"mod_id",value:e.state.mod_id,onChange:e.changeHandler},o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"5"},"5")),o.a.createElement("input",{type:"submit",className:"submit button",value:"Submit"})))}}))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).addNewPost=function(e,t){if(parseInt(t)>a.state.currentUser.mod_id)alert("You can only submit posts for mods you are in or have completed.");else{localStorage.getItem("token");fetch("https://welcome-board-backend.herokuapp.com/api/v1/posts",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:a.state.token},body:JSON.stringify({content:e,mod_id:parseInt(t),user_id:a.state.currentUser.id})}).then(function(e){return e.json()}).then(function(e){var t=Object(l.a)(a.state.posts);t.push(e),a.setState({posts:t})})}},a.submitSignUpHandler=function(e,t){t.preventDefault(),a.createUser(e),a.props.history.push("/home")},a.createUser=function(e){console.log("userinfo",e),fetch("https://welcome-board-backend.herokuapp.com/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({full_name:e.full_name,password:e.password,mod_id:e.mod_id})}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.jwt),a.setState({isUserLoggedIn:!0,token:localStorage.getItem("token"),currentUser:{id:e.user.id,full_name:e.user.full_name,password:"",mod_id:e.user.mod_id}})})},a.submitLoginHandler=function(e,t){t.preventDefault(),a.getUser(e),a.props.history.push("/home")},a.getUser=function(e){fetch("https://welcome-board-backend.herokuapp.com/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({full_name:e.loginFullName,password:e.loginPassword})}).then(function(e){if(401===e.status)throw new Error(e.status);return e.json()}).then(function(e){localStorage.setItem("token",e.jwt),localStorage.setItem("full_name",e.user.full_name),localStorage.setItem("id",e.user.id),localStorage.setItem("mod_id",e.user.mod_id),a.setState({isUserLoggedIn:!0,token:localStorage.getItem("token"),currentUser:{id:e.user.id,full_name:e.user.full_name,password:"",mod_id:e.user.mod_id}})}).catch(function(e){a.props.history.push("/login"),alert("HTTP ERROR: ".concat(e,", Unknown account or password!"))})},a.logout=function(){localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("full_name"),localStorage.removeItem("mod_id"),a.setState({currentUser:{id:0,full_name:"",mod_id:0},isUserLoggedIn:!1,token:""}),a.props.history.push("/home")},a.editPostHandler=function(e,t){console.log(e,t),fetch("https://welcome-board-backend.herokuapp.com/api/v1/posts/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:a.state.token},body:JSON.stringify({content:t})}).then(function(e){return e.json()}).then(function(t){var n=Object(l.a)(a.state.posts);n=n.map(function(a){return a.id===e?t:a}),a.setState({posts:n})})},a.state={isUserLoggedIn:!1,current_mod:0,currentUser:{id:0,full_name:"",mod_id:0},mods:[],posts:[],users:[],likes:[],token:""},a.updateHandler=a.updateHandler.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(fetch("https://welcome-board-backend.herokuapp.com/api/v1/mods").then(function(e){return e.json()}).then(function(t){return e.setState({mods:t})}),fetch("https://welcome-board-backend.herokuapp.com/api/v1/users").then(function(e){return e.json()}).then(function(t){return e.setState({users:t})}),fetch("https://welcome-board-backend.herokuapp.com/api/v1/posts").then(function(e){return e.json()}).then(function(t){e.setState({posts:t})}),fetch("https://welcome-board-backend.herokuapp.com/api/v1/likes").then(function(e){return e.json()}).then(function(t){e.setState({likes:t})}),this.state.isUserLoggedIn){var t=localStorage.getItem("token");fetch("https://welcome-board-backend.herokuapp.com/api/v1/current_user",{method:"GET",headers:{"Content-Type":"application/json",Action:"application/json",Authorization:"".concat(t)}})}localStorage.length>0&&this.setState({currentUser:{id:localStorage.getItem("id"),full_name:localStorage.getItem("full_name"),mod_id:localStorage.getItem("mod_id")},token:localStorage.getItem("token"),isUserLoggedIn:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(f,{isUserLoggedIn:this.state.isUserLoggedIn,logout:this.logout,currentPath:this.props.location.pathname}),o.a.createElement(v.a,null,o.a.createElement(k.a,{path:"/home",component:E}),o.a.createElement(k.a,{path:"/mod/:id",render:function(t){return o.a.createElement(O,{mod_id:t.match.params.id,postArray:e.state.posts,addPost:e.addNewPost,loggedInUser:e.state.isUserLoggedIn,currentUser:e.state.currentUser,deleteHandler:e.deleteHandler.bind(e),editPostHandler:e.editPostHandler,likes:e.state.likes,isUserLoggedIn:e.state.isUserLoggedIn,users:e.state.users})}}),o.a.createElement(k.a,{path:"/editProfile",render:function(){return o.a.createElement(H,{isUserLoggedIn:e.state.isUserLoggedIn,currentUser:e.state.currentUser,updateHandler:e.updateHandler,mods:e.state.mods})}}),o.a.createElement(k.a,{path:"/login",render:function(){return o.a.createElement(U,{submitLoginHandler:e.submitLoginHandler})}}),o.a.createElement(k.a,{path:"/signUp",render:function(){return o.a.createElement(I,{submitSignUpHandler:e.submitSignUpHandler})}}),o.a.createElement(k.a,{path:"/",component:E})))}},{key:"updateHandler",value:function(e){var t=this;this.setState({currentUser:e}),fetch("https://welcome-board-backend.herokuapp.com/api/v1/users/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:this.state.token},body:JSON.stringify({full_name:e.full_name,password:e.password,mod_id:e.mod_id})}).then(function(e){return e.json()}).then(function(e){t.setState({currentUser:{id:e.id,full_name:e.full_name,mod_id:e.mod_id}}),t.props.history.push("/home")})}},{key:"deleteHandler",value:function(e){var t=Object(l.a)(this.state.posts).filter(function(t){return t.id!==e});this.setState({posts:t})}}]),t}(n.Component),P=Object(j.a)(C);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(121);a(113);s.a.render(o.a.createElement(L.a,null,o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},46:function(e,t,a){e.exports=a(116)},51:function(e,t,a){},53:function(e,t,a){}},[[46,2,1]]]);
//# sourceMappingURL=main.5ee4fa27.chunk.js.map